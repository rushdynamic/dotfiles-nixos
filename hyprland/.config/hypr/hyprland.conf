# -- Variables --
$mod = SUPER
$alt = ALT

# -- Monitors --
# Single monitor (eDP-1)
# monitor=eDP-1, 1920x1080@60, 0x0, 1
# Dual monitor (Example mapping for your xrandr logic)
monitor=HDMI-A-1, 2560x1440@60, 1920x0, 1, bitdepth, 10
monitor=eDP-1, 1920x1080@60, 0x0, 1

# -- Autostart --
exec-once = ~/.config/hypr/scripts/autostart.sh
exec-once = waybar
exec-once = hyprpaper

# -- Appearance --
general {
    gaps_in = 7
    gaps_out = 15
    border_size = 1
    col.active_border = rgb(F99B8E)
    col.inactive_border = rgb(2C3038)
    layout = dwindle
}

decoration {
    rounding = 5
}

# -- Key Bindings --

# Terminal & Apps
bind = $mod, Return, exec, alacritty
bind = $mod SHIFT, Return, exec, alacritty --class alacritty-float
bind = $mod, T, exec, alacritty
bind = $mod SHIFT, F, exec, nautilus
bind = $mod SHIFT, E, exec, geany
bind = $mod SHIFT, W, exec, firefox

# Vim/Ranger/Htop via Alacritty (replacing your i3term scripts)
bind = $alt CONTROL, V, exec, alacritty -e vim
bind = $alt CONTROL, N, exec, alacritty -e nvim
bind = $alt CONTROL, R, exec, alacritty -e ranger
bind = $alt CONTROL, H, exec, alacritty -e htop

# Rofi (Note: Ensure you use a wayland-compatible rofi like rofi-wayland or wofi)
bind = $mod, D, exec, rofi -show drun
bind = $mod, Tab, exec, rofi -show window
bind = $mod, X, exec, ~/.config/i3/rofi/bin/powermenu # Ensure script is wayland-ready

# Window Management
bind = $mod SHIFT, Q, killactive, 
bind = CONTROL SHIFT, Q, exit, 
bind = $mod, Space, togglefloating, 
bind = CONTROL $alt, F, fullscreen, 0

$mod = SUPER
$alt = ALT

# -- Focus Windows --
# Arrow keys
bind = $mod, Left,  movefocus, l
bind = $mod, Right, movefocus, r
bind = $mod, Up,    movefocus, u
bind = $mod, Down,  movefocus, d

# Alt + Brackets/Equal/Minus (Your specific i3 setup)
bind = $alt, bracketleft,  movefocus, l
bind = $alt, bracketright, movefocus, r
bind = $alt, equal,        movefocus, u
bind = $alt, minus,        movefocus, d

# -- Move Windows --
# Arrow keys
bind = $mod SHIFT, Left,  movewindow, l
bind = $mod SHIFT, Right, movewindow, r
bind = $mod SHIFT, Up,    movewindow, u
bind = $mod SHIFT, Down,  movewindow, d

# Alt + Shift + Brackets (Your specific i3 setup)
bind = $alt SHIFT, bracketleft,  movewindow, l
bind = $alt SHIFT, bracketright, movewindow, r
bind = $alt SHIFT, equal,        movewindow, u
bind = $alt SHIFT, minus,        movewindow, d

# -- Layout Controls --
bind = $mod, h, layoutmsg, presel l # Hyprland doesn't "split h" like i3, but this prepares side-by-side
bind = $mod, v, layoutmsg, presel d
bind = $mod, s, layoutmsg, swapwithmaster master # Closest to 'stacking' logic
bind = $mod, w, togglegroup, # Hyprland 'Groups' act like i3 'Tabbed'
bind = $mod, e, togglesplit, # Toggle between horizontal/vertical
bind = $mod, Space, togglefloating, 
bind = $mod SHIFT, Space, focuscurrentorlast # Closest to focus mode_toggle

# ----------------------------------------------------------------
# MODE: Resize ($alt + $mod + Shift + r)
# ----------------------------------------------------------------
bind = $alt $mod SHIFT, r, submap, resize

submap = resize
    binde = , bracketleft,  resizeactive, -10 0
    binde = , bracketright, resizeactive, 10 0
    binde = , equal,        resizeactive, 0 -10
    binde = , minus,        resizeactive, 0 10
    
    bind = , Return, submap, reset
    bind = , Escape, submap, reset
    bind = $mod, r,  submap, reset
submap = reset

# ----------------------------------------------------------------
# MODE: Move ($mod + Shift + m)
# ----------------------------------------------------------------
bind = $mod SHIFT, m, submap, move

submap = move
    binde = , Left,  moveactive, -20 0
    binde = , Right, moveactive, 20 0
    binde = , Up,    moveactive, 0 -20

    binde = , Down,  moveactive, 0 20
    
    bind = , Return, submap, reset
    bind = , Escape, submap, reset
    bind = $mod, m,  submap, reset
submap = reset


# Workspaces (Switching with ALT + Number)
bind = $alt, 1, workspace, 1
bind = $alt, 2, workspace, 2
bind = $alt, 3, workspace, 3
bind = $alt, 4, workspace, 4
bind = $alt, 5, workspace, 5
bind = $alt, 6, workspace, 6
bind = $alt, 7, workspace, 7
bind = $alt, 8, workspace, 8
bind = $alt, 9, workspace, 9
bind = $alt, 0, workspace, 10

# Move to Workspace (ALT + CTRL + Number)
bind = $alt CONTROL, 1, movetoworkspace, 1
bind = $alt CONTROL, 2, movetoworkspace, 2
bind = $alt CONTROL, 3, movetoworkspace, 3
bind = $alt CONTROL, 4, movetoworkspace, 4
bind = $alt CONTROL, 5, movetoworkspace, 5
bind = $alt CONTROL, 6, movetoworkspace, 6
bind = $alt CONTROL, 7, movetoworkspace, 7
bind = $alt CONTROL, 8, movetoworkspace, 8
bind = $alt CONTROL, 9, movetoworkspace, 9
bind = $alt CONTROL, 0, movetoworkspace, 10

# Function Keys (Audio/Brightness)
bindle = , XF86AudioRaiseVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ +5%
bindle = , XF86AudioLowerVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ -5%
bindl = , XF86AudioMute, exec, pactl set-sink-mute @DEFAULT_SINK@ toggle
bindl = , F8, exec, playerctl play-pause
bindl = , F9, exec, playerctl next
bindl = , F7, exec, playerctl previous

# -- Window Rules --
# -- Window Rules (V2) --
windowrulev2 = float, class:^(alacritty-float)$
windowrulev2 = float, class:^(pavucontrol)$
windowrulev2 = float, class:^(Lxappearance)$
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = float, class:^(Pcmanfm)$
windowrulev2 = float, class:^(feh)$
windowrulev2 = float, class:^(Viewnior)$
windowrulev2 = float, class:^(VirtualBox Manager)$

# Handle i3-style "pop-up" roles
windowrulev2 = float, title:^(branchdialog)$
windowrulev2 = float, title:^(task_dialog)$

# Workspace Assignments
windowrulev2 = workspace 3, class:^(firefox)$
windowrulev2 = workspace 3, class:^(Brave-browser)$
windowrulev2 = workspace 1, class:^(VSCodium)$
windowrulev2 = workspace 4, class:^(obsidian)$

# -- Mouse Bindings --
bindm = $mod, mouse:272, movewindow
bindm = $mod, mouse:273, resizewindow

animations {
    enabled = yes

    # 1. Define a Bezier curve (name, x0, y0, x1, y1)
    bezier = myBezier, 0.05, 0.9, 0.1, 1.05

    # 2. Apply it to windows/layers (name, on/off, speed, curve, style)
    # Lower speed number = faster animation (e.g., 3 is very fast, 10 is slow)
    animation = windows, 1, 5, myBezier
    animation = windowsOut, 1, 5, default, popin 80%
    animation = border, 1, 8, default
    animation = fade, 1, 5, default
    animation = workspaces, 1, 4, default
}